<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Microservices Comunications: talk or listen - PlovDev 2018</title>
    <meta
      name="description"
      content="Strategies for Microservices comunications"
    />
    <meta name="author" content="Nikolay Petkov" />
    <link href="css/presentation.css" rel="stylesheet" />
  </head>
  <body class="impress-not-supported">
    <div class="fallback-message">
      <p>
        Your browser <b>doesn't support the features required</b> by impress.js,
        so you are presented with a simplified version of this presentation.
      </p>
      <p>
        For the best experience please use the latest <b>Chrome</b>,
        <b>Safari</b> or <b>Firefox</b> browser.
      </p>
    </div>

    <!-- Some images that are fixed to background in the css -->
    <img id="shep-left-image" class="bg" src="images/shep-left.png" />
    <img id="logo-image" class="bg" src="images/logoProxiadGPWpetit2.png" />
    <img id="monolith-image" class="bg" src="images/hulk.png" />
    <img id="spiderman-image" class="bg" src="images/spiderman.png" />
    <img id="microservices-image" class="bg" src="images/microservice.png" />
    <img
      id="distributed-image"
      class="bg"
      src="images/distributed-computing.png"
    />

    <div id="impress" data-transition-duration="1000">
      <div id="intro" class="step" data-scale="2" data-x="-500" data-y="-500">
        <h1>Microservices<br />Comunications</h1>
        <h2>talk or listen?</h2>
        <h4 class="intro-author">Nikolay Petkov</h4>
      </div>

      <div
        id="monolith"
        class="step"
        data-rel-x="1500"
        data-rel-y="1500"
        data-scale="1"
      >
        <h1>What is monolith?</h1>

        <p>Normal application that try to be too many things at once, i.e.</p>
        <ul>
          <li>Cover many different business domains and processes</li>
          <li>Serve different teams in one organisation</li>
          <li>
            Havie single domain model trying to fit all business perspectives
          </li>
          <li>... other try to do all</li>
        </ul>
      </div>

      <div id="monolith-fake-cite" class="step" data-x="2000" data-y="2000">
        <h1>What people say about it</h1>
        <blockquote>
          I love it, there is only one application to deploy and monitor in
          production. I have enough time for coffee and cigarets
          <footer>Brad Pitt, IT Operational</footer>
        </blockquote>

        <blockquote>
          I can create new client, initialise current account and credit card,
          calculate the risk and score, transfer referal bonus and run 3 batches
          in single ACID transaction. Amazing!!!
          <footer>Superman, Senior Developer</footer>
        </blockquote>

        <blockquote>
          The credit team ask me to add new credit score. I found there is
          already table SCORE. I'll just add 3 new columns to the other 56 and
          its done. Fantastic, our 5 years old app, already have tables for
          everithing.
          <footer>Vesko Marinov, Business Analyst</footer>
        </blockquote>
      </div>

      <div id="monolith-truth" class="step" data-rel-x="0" data-rel-y="1000">
        <h1>Actually its no <span class="rotating">so</span> bad</h1>
        <p>
          Well done <b>Monolith</b> has many advanteges over the distributed by
          nature <b>Microservices</b>
        </p>
        <ul>
          <li>
            <u>Simple, fine-grained, in-process comunication</u>, i.e.
            method/function calls
          </li>
          <li>End-to-end ACID transactions</li>
          <li>Fast access to all data owned by the application</li>
          <li>Easy error handling at framework or language level</li>
          <li>Less complexity to deploy and monitor</li>
        </ul>
        <blockquote>
          With great power comes great responsibility
          <footer>Spiderman</footer>
        </blockquote>
      </div>

      <div id="microservices" class="step" data-rel-x="0" data-rel-y="1000">
        <h1>What about Microservices</h1>
        <p>Normal application focused on single business context or process</p>
        <ul>
          <li>Small, independently deployable services</li>
          <li>Aligned to organizational and architectural boundaries</li>
          <li>
            <u>Distributted, corser-grained, inter-process communication</u>
          </li>
          <li>Microservice owns its own data and its own domain logic</li>
          <li>Complex deployment, traceability and monitoring</li>
        </ul>
        <blockquote>
          Itâ€™s extremely important to achieve loose coupling between services,
          otherwise you will easily end up with a distributed monolith.
          <footer>Some wise man</footer>
        </blockquote>
      </div>

      <div
        id="fallacies-of-distributed-computing"
        class="step"
        data-x="3500"
        data-y="2000"
      >
        <h2>Fallacies of distributed computing</h2>
        <p>
          The fallacies of distributed computing are a set of assertions made by
          L Peter Deutsch and others at Sun Microsystems
        </p>
        <ul>
          <li>The network is reliable</li>
          <li>Latency is zero</li>
          <li>Bandwidth is infinite</li>
          <li>The network is secure</li>
          <li>Topology doesn't change.</li>
          <li>There is one administrator.</li>
          <li>...</li>
        </ul>
      </div>

      <div
        id="microservices-communication"
        class="step"
        data-rel-x="0"
        data-rel-y="1000"
      >
        <h1>Microservices communication</h1>
        <div class="two-cols-grid">
          <div id="architecture">
            <h2>Architecture</h2>
            <ul>
              <li>Orchestration</li>
              <li>Choreography</li>
            </ul>
          </div>
          <div id="approaches">
            <h2>Implementation</h2>
            <ul>
              <li>REST</li>
              <li>Messaging</li>
              <li>Domain Events</li>
              <li>Feeds</li>
            </ul>
          </div>
        </div>
      </div>

      <div
        id="orchestration-vs-choreography"
        class="step"
        data-rel-x="0"
        data-rel-y="1000"
      >
        <h1>Orchestration vs Choreography</h1>
        <div class="two-cols-grid">
          <div id="orchestration">
            <h2>Orchestration</h2>
            <img src="images/conductor.jfif" style="width: 90%" />
            <ul>
              <li>Local, centralized perspective</li>
              <li>
                Each player in the orchestra strictly follows instructions from
                the conducotr
              </li>
            </ul>
          </div>
          <div id="choreography">
            <h2>Choreography</h2>
            <img src="images/choreography.jfif" style="width: 90%" />
            <ul>
              <li>Global, distributed perspective</li>
              <li>
                Dancers dance following a global scenario and music, wihout
                single point of control
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div id="rest" class="step" data-x="5000" data-y="2000">
        <h1>REST</h1>
        <div class="two-cols-grid">
          <div id="rest-call">
            <img src="images/rest-communication.png" style="width: 90%" />
          </div>
          <div>
            <ul>
              <li>HTTP based, simple and well understood</li>
              <li>Easy to implement</li>
              <li>Support Hypermedia and multiple representations</li>
              <li>Synchronous by default</li>
              <li>
                Highly dependent on network latency and service availability
              </li>
              <li>Supports only Orchestration</li>
            </ul>
          </div>
        </div>
      </div>

      <div id="rest-challanges" class="step" data-rel-x="0" data-rel-y="1000">
        <h1>REST Challenges</h1>
        <p>Easy to implement, hard to scale</p>
        <ul>
          <li>
            <h4>Service Discovery</h4>
            How do downstream system know about the URLs of upstream services?
            What if there are many instances of them?
          </li>
          <li>
            <h4>Reselience</h4>
            What to do if service start producing errors, goes down or there is
            high lateny
          </li>
          <li>
            <h4>Load balancing</h4>
            How and where load balancing is performed? Client side, platform or
            dedicated hardware?
          </li>
        </ul>
      </div>

      <div id="messaging" class="step" data-rel-x="0" data-rel-y="1000">
        <h1>Messaging</h1>
        <div class="two-cols-grid">
          <div id="rest-call">
            <img src="images/messaging.png" style="width: 90%" />
          </div>
          <div>
            <ul>
              <li>Organised arround topics and queues</li>
              <li>
                Reliable - guarantee delivery, supports delivery acknowledgment
              </li>
              <li>A lot of mature message queue software</li>
              <li>Asyncronous by default</li>
              <li>Decoupling of consumer and producer</li>
              <li>Supports both Orchestration and Choreography</li>
            </ul>
          </div>
        </div>
      </div>

      <div
        id="messaging-challenges"
        class="step"
        data-rel-x="1000"
        data-rel-y="1000"
      >
        <h1>Messaging Challenges</h1>
        <p>Easy to implement, scales well</p>
        <ul>
          <li>
            <h4>Service Discovery</h4>
            No need of service discovery! The only need is to know the URL of
            message queue
          </li>
          <li>
            <h4>Reselience</h4>
            Message systems can guarantee delivery of messages. The main risk is
            latency if consumer produces errors or is down
          </li>
          <li>
            <h4>Load balancing</h4>
            Its usualy part of the messaging system. All you need to do is to
            scale the number of instances of producing and consuming
            microservices
          </li>
        </ul>
      </div>

      <div id="domain-events" class="step" data-rel-x="1000" data-rel-y="0">
        <h1>Domain events</h1>
        <p>Its a Messaging organised arround business recognised events</p>
        <ul>
          <li>
            Event is something that has already happened<br />CreditApplicationSubmittedEvent,
            not StartCreditEvent
          </li>
          <li>It can be placed on a timeline</li>
          <li>Easy to grasp by domain experts</li>
          <li>Self-explanatory semanthic</li>
          <li>Supoprts only Choreography</li>
        </ul>
      </div>

      <div id="events-payload" class="step" data-rel-x="0" data-rel-y="1000">
        <h1>Event payload</h1>
        <p>
          What is the payload of REST is well known, but what should be the
          payload of an event?
        </p>
        <div class="two-cols-grid">
          <div id="rest-call">
            <ul>
              <li>
                <h4>Full Payload</h4>
                The payload is complete information describing the data behind
                the event trigger
              </li>
              <li>
                <h4>Reference</h4>
                The event carry only a URL reference to a REST resource holding
                the complete information
              </li>
            </ul>
          </div>
          <div>
            <ul>
              <li>
                <h4>Empty</h4>
                The event is empty and is being used to trigger pulling from a
                well known place
              </li>
              <li>
                <h4>Mixed</h4>
                Contains data that is usually of interest to many other
                contexts. For the rets there is reference to REST resource
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div id="full-payload" class="step" data-rel-x="0" data-rel-y="1000">
        <h1>Full payload</h1>
        <div class="two-cols-grid">
          <div id="rest-call">
            <img src="images/full-payload.png" style="width: 90%" />
          </div>
          <div>
            <ul>
              <li>Event contains the full object graph</li>
              <li>Consumers do have all the data they need</li>
              <li>May lead to tight coupling between event and consumer</li>
            </ul>
          </div>
        </div>
      </div>

      <div id="reference-payload" class="step" data-rel-x="0" data-rel-y="1000">
        <h1>Reference payload</h1>
        <div class="two-cols-grid">
          <div id="rest-call">
            <img src="images/reference-payload.png" style="width: 90%" />
          </div>
          <div>
            <ul>
              <li>
                Event contains only info about the event and reference to REST
                resource where from to take the data
              </li>
              <li>Consumers decides if retrive or not the data</li>
              <li>Needs syncroneous comunication, but no service discovery</li>
            </ul>
          </div>
        </div>
      </div>

      <div id="feeds" class="step" data-rel-x="1000" data-rel-y="0">
        <h1>Feeds</h1>
        <img src="images/feeds.png" style="width: 100%" />
      </div>

      <div id="feeds-challenges" class="step" data-rel-x="1000" data-rel-y="0">
        <h1>Feeds Challenges</h1>
        <p>Easy to implement, scales well, not suitable for every case</p>
        <ul>
          <li>
            <h4>Service Discovery</h4>
            No need of service discovery! The only need is to know the URL where
            feed is published
          </li>
          <li>
            <h4>Reselience</h4>
            As stable as the HTTP server where feed is published. Polling could
            be adjusted to the needs
          </li>
          <li>
            <h4>Load balancing</h4>
            Load balancing is done on the published REST URL mostly usiing
            hardware load balancers
          </li>
        </ul>
      </div>

      <div
        id="time-for-questions"
        class="step"
        data-rel-x="1000"
        data-rel-y="0"
      >
        <h1>Time for questions</h1>
        <img src="images/cofee-time.jpg" style="width: 100%" />
      </div>

      <div
        id="overview"
        class="step"
        data-x="3000"
        data-y="2000"
        data-scale="9"
        style="pointer-events: none;"
      ></div>
    </div>

    <script type="text/javascript" src="js/impress.js"></script>
    <script>
      impress().init();
    </script>
  </body>
</html>
